From 404f6e631d623075fce794f114e84aefc035e035 Mon Sep 17 00:00:00 2001
From: Arthur Liberman <arthur_liberman@hotmail.com>
Date: Sat, 4 May 2019 16:32:35 +0300
Subject: [PATCH] alsa: add S/PDIF support for Amlogic

---
 xbmc/cores/AudioEngine/Sinks/AESinkALSA.cpp | 7 +++++--
 1 file changed, 5 insertions(+), 2 deletions(-)

diff --git a/xbmc/cores/AudioEngine/Sinks/AESinkALSA.cpp b/xbmc/cores/AudioEngine/Sinks/AESinkALSA.cpp
index 60de6b8d018..96a30332194 100644
--- a/xbmc/cores/AudioEngine/Sinks/AESinkALSA.cpp
+++ b/xbmc/cores/AudioEngine/Sinks/AESinkALSA.cpp
@@ -1619,9 +1619,12 @@ void CAESinkALSA::EnumerateDevice(AEDeviceInfoList &list, const std::string &dev
       info.m_dataFormats.push_back(i);
   }
 
-  if (GetAMLDeviceType(info.m_displayName) != AML_NONE && info.m_deviceType != AE_DEVTYPE_HDMI)
+  if (GetAMLDeviceType(info.m_displayName) != AML_NONE)
   {
-    info.m_displayNameExtra = "PCM";
+    if (info.m_deviceType == AE_DEVTYPE_IEC958)
+      info.m_displayNameExtra = "S/PDIF";
+    else if (info.m_deviceType != AE_DEVTYPE_HDMI)
+      info.m_displayNameExtra = "PCM";
   }
 
   if (info.m_deviceType == AE_DEVTYPE_HDMI)
