From 52874b87ae02222d591d455aa76fd9ffb0848a79 Mon Sep 17 00:00:00 2001
From: afl1 <afl2001@gmail.com>
Date: Fri, 24 May 2019 21:28:20 +0200
Subject: [PATCH] AMLCodec: fix interlaced/progressive detection

---
 xbmc/cores/VideoPlayer/DVDCodecs/Video/AMLCodec.cpp | 3 +--
 1 file changed, 1 insertion(+), 2 deletions(-)

diff --git a/xbmc/cores/VideoPlayer/DVDCodecs/Video/AMLCodec.cpp b/xbmc/cores/VideoPlayer/DVDCodecs/Video/AMLCodec.cpp
index 0b9c492a536..a8dd0d3866c 100644
--- a/xbmc/cores/VideoPlayer/DVDCodecs/Video/AMLCodec.cpp
+++ b/xbmc/cores/VideoPlayer/DVDCodecs/Video/AMLCodec.cpp
@@ -2154,8 +2154,7 @@ CDVDVideoCodec::VCReturn CAMLCodec::GetPicture(VideoPicture *pVideoPicture)
   else if (timesize < 1.0)
     return CDVDVideoCodec::VC_BUFFER;
 
-  SysfsUtils::GetString("/sys/class/deinterlace/di0/frame_format", vfmt);
-  if (vfmt.c_str())
+  if (!SysfsUtils::GetString("/sys/class/deinterlace/di0/frame_format", vfmt) && (vfmt.size() > 4))
     m_processInfo.SetVideoInterlaced(vfmt.compare("progressive"));
 
   return CDVDVideoCodec::VC_NONE;
