From e59c3070993c712b46d5642749a2a7eae998c271 Mon Sep 17 00:00:00 2001
From: afl1 <afl2001@gmail.com>
Date: Sat, 11 May 2019 23:19:18 +0200
Subject: [PATCH] AMLCodec: workaround for VC1 progressive

---
 xbmc/cores/VideoPlayer/DVDCodecs/Video/AMLCodec.cpp | 5 +++++
 1 file changed, 5 insertions(+)

diff --git a/xbmc/cores/VideoPlayer/DVDCodecs/Video/AMLCodec.cpp b/xbmc/cores/VideoPlayer/DVDCodecs/Video/AMLCodec.cpp
index 13cf9eb5ca2..4e9c8f39970 100644
--- a/xbmc/cores/VideoPlayer/DVDCodecs/Video/AMLCodec.cpp
+++ b/xbmc/cores/VideoPlayer/DVDCodecs/Video/AMLCodec.cpp
@@ -1648,6 +1648,11 @@ bool CAMLCodec::OpenDecoder(CDVDStreamInfo &hints)
   am_private->gcodec.ratio64     = am_private->video_ratio64;
   am_private->gcodec.param       = NULL;
 
+  if (am_private->video_format == VFORMAT_VC1) 					/* workaround to fix slowdown VC1 progressive */
+    SysfsUtils::SetInt("/sys/module/di/parameters/di_debug_flag", 0x10000);
+  else
+    SysfsUtils::SetInt("/sys/module/di/parameters/di_debug_flag", 0);
+
   switch(am_private->video_format)
   {
     default:
